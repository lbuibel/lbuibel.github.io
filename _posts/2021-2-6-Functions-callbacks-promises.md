---
layout: post
title: Functions, Callbacks and Promises
---

Taking a deeper look at how functions, callbacks and promises work in Javascript.

### Functions

#### How to declare a function

Declaring a function in Javascript can be done both as a function expression, and a decoration. A function declaration can be done like so:
```
function adNumbers(x, y) {
  return x + y;
}
```
A function expression that accomplishes the same thing would be setup like so:
```
const sum = function(x, y) {
  return x + y;
};
```
Which assigns sum with the value of x plus y via a function.

<br>

#### How to return a value from a function
In the above two functions, the return keyword returns the value of whichever two numbers were added up. Return is the final result or value generated by the function that needs to returned back to program or user.
<br>

#### How to accept a value into a function
Functions can accept values via the use of parameters. In the above functions where we added two number, x and y are both parameters accepted by the function. Functions can have no parameters, or an indefinite amount. To setup a function with an indefinite number of parameters you can use the spread syntax in your function setup like so:
```
function sum(...theParameters) {
  return theParameters.reduce((previous, current) => {
    return previous + current;
  });
}
```
<br>

### Callbacks

#### What is a callback, and how do they work?
A callback is a function that is used as an argument within another function. There are two types of callback functions, synchronous and asynchronous. Synchronous callback functions happen immediately, here is an example:
```
function printName(name) {
  console.log('Hello ' + name);
}

function triggerInput(callback) {
  var name = prompt('Please enter name: ');
  callback(name);
}

triggerInput(greeting);

```
In this example, the parameter used in the triggerInput function is a callback. The first function called in the program is triggerInput, which first prompts the user to enter their name. Once that is done, the callback function, in this case "getting" is called which displays the users name.

Asynchronous functions are typically used to continue code after executions of certain operations have been completed. A common use case scenario for using asynchronous callbacks is when using api's:
```
fetch('products.json')
.then(function(response) {
  return response.json();
})
.then(function(json) {
  products = json;
  initialize();
})
.catch(function(err) {
  console.log('Fetch problem: ' + err.message);
}); 
```
In this example fetch() takes a single parameter and returns what's called a promise. The then(), and catch() functions are asynchronous callbacks that don't happen until the fetch function has completed.

<br>

#### When might you use one in your own code?
Typically you'll want to use asynchronous callbacks when making api calls. You'll want to return data from the api to use in your code, but don't want to return the code from the api before it's finishing being fetched from the server.

<br>

### Promises

#### What is a promise and how do they work?

Just like in a the real world, a promise that is something that is going to take place down the road, or later in time. In javascript, a promise is proxy or a placeholder for a value that isn't quite known or set yet.

Promises have three different states, pending, fulfilled and rejected. These states can then be handled with .then() statements depending on what you want to do with returned data.

Exa:
```
const promiseExa = new Promise( (resolve, reject) => {
    resolve(xyz);
});
// At this point, "promiseExa" is already settled/resolved.

promiseExa.then( (val) => console.log("value:", val) );
console.log("hello world");

// results in console logs in this order:
// hello world
// value: xyz

```
<br>

#### What is the async, await syntax? How does it work?

Async await helps clean things up a bit. A good example of how async await would be used is when making an api call like so:

```
let storyIds = []

async function getIds() {
    const result = await fetch(ID_URL)
    let data = await result.json()
    storyIds = data
    return storyIds
}
```
In this example we make a call to an API that returns a list of ID numbers, where we wait for the results, and json data to be returned before moving on.

This is helpful because it makes the code a easier to read for the developer, and negating the use of so many .then() calls to handle the data.
